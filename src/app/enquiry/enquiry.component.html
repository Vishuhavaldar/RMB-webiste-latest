<!-- Fixed Enquiry Button -->
<button
  (click)="openEnquiryForm()"
  class="fixed bottom-6 right-6 bg-blue-600 text-white px-6 py-3 rounded-full shadow-lg hover:bg-blue-700 transition flex items-center space-x-2 text-lg"
>
  <i class="fa-solid fa-envelope text-xl"></i>
  <span>Enquiry</span>
</button>

<!-- Enquiry Form Modal -->
<div
  *ngIf="isEnquiryOpen"
  class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"
>
  <div
    class="bg-white p-6 md:p-8 rounded-2xl shadow-xl w-full max-w-xl md:max-w-3xl h-[90vh] max-h-[90vh] overflow-y-auto transition-all duration-300"
  >
    <h3 class="text-3xl font-bold text-blue-600 text-center mb-4">
      <i class="fa-solid fa-envelope-open-text mr-2"></i> Customer Inquiry Form
    </h3>

    <!-- Form -->
    <form [formGroup]="enquiryForm" (ngSubmit)="submitEnquiry()" class="grid grid-cols-1 md:grid-cols-2 gap-4">

      <!-- First Name -->
      <div>
        <label class="block text-sm font-semibold text-gray-700">First Name *</label>
        <input
          type="text"
          formControlName="firstName"
          class="w-full mt-2 p-3 border rounded-md focus:ring-blue-500 focus:border-blue-500"
          [ngClass]="{'border-red-500': enquiryForm.get('firstName')?.invalid && enquiryForm.get('firstName')?.touched}"
          placeholder="Enter your first name"
          required
        />
        <span
          *ngIf="enquiryForm.get('firstName')?.invalid && enquiryForm.get('firstName')?.touched"
          class="text-red-500 text-sm"
        >
          First name is required and must be at least 2 characters.
        </span>
      </div>

      <!-- Last Name -->
      <div>
        <label class="block text-sm font-semibold text-gray-700">Last Name *</label>
        <input
          type="text"
          formControlName="lastName"
          class="w-full mt-2 p-3 border rounded-md focus:ring-blue-500 focus:border-blue-500"
          [ngClass]="{'border-red-500': enquiryForm.get('lastName')?.invalid && enquiryForm.get('lastName')?.touched}"
          placeholder="Enter your last name"
          required
        />
        <span
          *ngIf="enquiryForm.get('lastName')?.invalid && enquiryForm.get('lastName')?.touched"
          class="text-red-500 text-sm"
        >
          Last name is required and must be at least 2 characters.
        </span>
      </div>

      <!-- Designation -->
      <div>
        <label class="block text-sm font-semibold text-gray-700">Designation *</label>
        <input
          type="text"
          formControlName="designation"
          class="w-full mt-2 p-3 border rounded-md focus:ring-blue-500 focus:border-blue-500"
          placeholder="Enter your designation"
          required
          [ngClass]="{'border-red-500': enquiryForm.get('designation')?.invalid && enquiryForm.get('designation')?.touched}"
        />
        <span
          *ngIf="enquiryForm.get('designation')?.invalid && enquiryForm.get('designation')?.touched"
          class="text-red-500 text-sm"
        >
          Designation is required.
        </span>
      </div>

      <!-- Company Name -->
      <div>
        <label class="block text-sm font-semibold text-gray-700">Company Name *</label>
        <input
          type="text"
          formControlName="company"
          class="w-full mt-2 p-3 border rounded-md focus:ring-blue-500 focus:border-blue-500"
          placeholder="Enter your company name"
          required
          [ngClass]="{'border-red-500': enquiryForm.get('company')?.invalid && enquiryForm.get('company')?.touched}"
        />
        <span
          *ngIf="enquiryForm.get('company')?.invalid && enquiryForm.get('company')?.touched"
          class="text-red-500 text-sm"
        >
          Company name is required.
        </span>
      </div>

      <!-- Email -->
      <div>
        <label class="block text-sm font-semibold text-gray-700">Email *</label>
        <input
          type="email"
          formControlName="email"
          class="w-full mt-2 p-3 border rounded-md focus:ring-blue-500 focus:border-blue-500"
          placeholder="Enter your email"
          required
          [ngClass]="{'border-red-500': enquiryForm.get('email')?.invalid && enquiryForm.get('email')?.touched}"
        />
        <span
          *ngIf="enquiryForm.get('email')?.invalid && enquiryForm.get('email')?.touched"
          class="text-red-500 text-sm"
        >
          Please enter a valid email.
        </span>
      </div>

      <!-- Mobile -->
      <div>
        <label class="block text-sm font-semibold text-gray-700">Mobile *</label>
        <input
          type="tel"
          formControlName="mobile"
          class="w-full mt-2 p-3 border rounded-md focus:ring-blue-500 focus:border-blue-500"
          placeholder="Enter your mobile number"
          required
          [ngClass]="{'border-red-500': enquiryForm.get('mobile')?.invalid && enquiryForm.get('mobile')?.touched}"
        />
        <span
          *ngIf="enquiryForm.get('mobile')?.invalid && enquiryForm.get('mobile')?.touched"
          class="text-red-500 text-sm"
        >
          Mobile number must be exactly 10 digits.
        </span>
      </div>

      <!-- Message -->
      <div class="col-span-2">
        <label class="block text-sm font-semibold text-gray-700">Message *</label>
        <textarea
          formControlName="message"
          class="w-full mt-2 p-3 border rounded-md focus:ring-blue-500 focus:border-blue-500"
          placeholder="Enter your message"
          rows="4"
          required
          [ngClass]="{'border-red-500': enquiryForm.get('message')?.invalid && enquiryForm.get('message')?.touched}"
        ></textarea>
        <span
          *ngIf="enquiryForm.get('message')?.invalid && enquiryForm.get('message')?.touched"
          class="text-red-500 text-sm"
        >
          Message must be at least 10 characters.
        </span>
      </div>

      <!-- Buttons Side by Side -->
      <div class="col-span-2 flex justify-between gap-4 mt-4">
        <!-- Submit Button -->
        <button
          type="submit"
          class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition flex-1"
          [disabled]="enquiryForm.invalid"
        >
          <i class="fa-solid fa-paper-plane mr-2"></i> Send Enquiry
        </button>

        <!-- Close Button -->
        <button
          type="button"
          (click)="closeEnquiryForm()"
          class="w-full bg-gray-400 text-white py-3 rounded-lg hover:bg-gray-500 transition flex-1"
        >
          <i class="fa-solid fa-times mr-2"></i> Close
        </button>
      </div>
    </form>
  </div>
</div>
